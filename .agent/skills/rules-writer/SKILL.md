---
name: rules-writer
description: Process Forge 프로젝트의 메타 규칙(.agent/rules/) 작성을 안내합니다. 사용자가 새 시스템 규칙을 "만들어줘", "작성해줘" 요청하거나, document-schema, ownership, change-control 같은 메타 규칙 구조에 대해 질문할 때 사용합니다.
---

# 메타 규칙 작성 도우미

이 스킬은 Process Forge 프로젝트의 메타 규칙 문서(`.agent/rules/`)를 모범 사례와 검증 요구사항에 맞게 작성할 수 있도록 안내합니다.

## 사용 시점

이 스킬을 사용하는 경우:
- 새로운 메타 규칙(`.agent/rules/`) 생성
- 기존 메타 규칙 문서 수정 또는 개선
- 메타 규칙 구조(헤더, 섹션) 설계
- document-schema, ownership, change-control 같은 시스템 규칙 작성
- MASTER.md의 하위 규칙 정의

## 핵심 개념

### 메타 규칙 vs RUL 운영 규칙 비교

| 구분 | 메타 규칙 (`.agent/rules/`) | RUL 규칙 (`docs/rules/`) |
|------|---------------------------|--------------------------|
| **YAML frontmatter** | 없음 | 있음 |
| **docId** | 없음 (영문 파일명) | RUL-domain-seq |
| **템플릿** | 미사용 | TPL-rule.md |
| **Owner** | 프로젝트 관리자 | 개인 Owner |
| **목적** | 프로젝트 시스템 규칙 | 조직 운영 규칙 |
| **상위 문서** | MASTER.md | 정책/프로세스 |
| **저장 위치** | `.agent/rules/` | `docs/rules/` |

### 메타 규칙의 특성

**메타 규칙이란:**
- Process Forge 시스템 자체를 관리하는 규칙
- MASTER.md의 핵심 원칙을 구체화
- 운영 문서(POL, PRC, RUL)의 작성 기준을 정의

**기존 메타 규칙:**
- `document-schema.md` - 문서 체계/네이밍 규칙
- `ownership.md` - 소유권/RACI 규칙
- `change-control.md` - 변경 통제 규칙

### 메타 규칙 사용 기준

**메타 규칙이 적합한 경우:**
- 프로젝트 시스템의 기본 규칙 정의
- 모든 문서에 적용되는 공통 규칙
- MASTER.md 원칙의 세부 구현
- 템플릿/스킬/에이전트 작성 기준

**RUL 운영 규칙이 적합한 경우:**
- 특정 도메인의 운영 규칙
- 개인 Owner가 관리하는 규칙
- 조직의 업무 프로세스 규칙

## 지침

### 1단계: 규칙 범위 결정

먼저, 메타 규칙이 맞는지 확인합니다:

1. **메타 규칙 판단 기준**:
   - 프로젝트 시스템 전체에 적용되는가?
   - MASTER.md의 원칙을 구체화하는가?
   - 모든 문서/스킬/에이전트에 영향을 미치는가?

2. **범위를 좁게 유지**: 하나의 규칙 = 하나의 주제
   - 좋은 예: "문서 체계 규칙", "소유권 규칙", "변경 통제 규칙"
   - 너무 넓은 예: "문서 관리 규칙", "프로젝트 규칙"

3. **기존 규칙 확인**:
   ```bash
   ls .agent/rules/
   ```

### 2단계: 파일명 결정

메타 규칙의 파일명을 결정합니다:

**형식**: `{영문명}.md` (하이픈 구분)

| 규칙 | 파일명 예시 |
|------|-----------|
| 분류 체계 | `document-schema.md` |
| 소유권 | `ownership.md` |
| 변경 통제 | `change-control.md` |
| 품질 기준 | `quality-gate.md` |
| 생명주기 | `lifecycle.md` |

**주의**: docId 없음, 직접 영문으로 명명

### 3단계: 헤더 작성 (YAML 없음)

메타 규칙은 YAML frontmatter 대신 마크다운 헤더를 사용합니다:

```markdown
# {filename}.md - {한글 제목}

> **상위 규칙**: MASTER.md
> **버전**: 1.0
> **상태**: Draft

---
```

**실제 예시** (document-schema.md):
```markdown
# document-schema.md - 문서 체계 규칙

> **상위 규칙**: MASTER.md
> **버전**: 1.0
> **상태**: Draft

---
```

**헤더 필드**:

| 필드 | 필수 | 설명 | 값 |
|------|------|------|-----|
| 상위 규칙 | O | 상위 참조 문서 | `MASTER.md` |
| 버전 | O | 문서 버전 | `1.0`, `1.1` |
| 상태 | O | 문서 상태 | `Draft`, `Review`, `Approved` |

### 4단계: 개요 섹션 작성

규칙의 목적과 정의를 명시합니다:

```markdown
## 1. 개요

이 규칙은 {{규칙 목적}}을 정의합니다.

### 1.1 규칙 정의

{{규칙의 핵심 정의 1-2문장}}
```

**실제 예시** (ownership.md):
```markdown
## 1. 개요

이 규칙은 Process Forge 프로젝트 내 모든 문서의 소유권(Ownership) 원칙을 정의합니다.

### 1.1 규칙 정의

모든 문서는 명확한 책임자(Owner)가 있어야 하며, 이를 통해 문서의 품질과 일관성을 보장합니다.
```

### 5단계: 핵심 원칙 정의 (블록쿼트 활용)

규칙의 핵심 원칙을 블록쿼트로 강조합니다:

```markdown
## 2. 핵심 원칙: {{원칙명}}

> **{{핵심 원칙 한 문장}}**

### 2.1 원칙 설명

{{원칙의 상세 설명}}

### 2.2 적용 범위

| 구분 | 대상 |
|------|------|
| 적용 | {{적용 대상}} |
| 제외 | {{제외 대상}} |
```

**실제 예시** (ownership.md):
```markdown
## 2. 핵심 원칙: Single Owner

> **모든 문서는 반드시 개인 1명(Owner)에게 귀속된다.**

### 2.1 원칙 설명

- 팀, 부서, 역할이 아닌 **개인 1명**이 Owner
- Owner 부재 시 반드시 Deputy(대리자) 지정
- 공동 Owner 금지 (책임 소재 불명확)
```

### 6단계: 상세 규칙 섹션 작성 (테이블 활용)

구체적인 규칙을 테이블과 함께 정의합니다:

```markdown
## 3. {{규칙 주제}}

### 3.1 {{세부 규칙}}

| 항목 | 내용 |
|------|------|
| **조건** | {{조건}} |
| **규칙** | {{규칙}} |
| **예시** | {{예시}} |
```

**실제 예시** (document-schema.md):
```markdown
## 2. docId 네이밍 규칙

### 2.1 기본 형식

```
{TYPE}-{domain}-{seq}
```

| 구성요소 | 설명 | 예시 |
|----------|------|------|
| TYPE | 문서 유형 (대문자) | POL, PRC, RUL, CHG |
| domain | 업무 도메인 (소문자) | docops, planops |
| seq | 일련번호 (3자리) | 001, 002 |
```

### 7단계: 절차/프로세스 정의 (해당 시)

절차가 포함된 규칙은 단계별로 설명합니다:

```markdown
## N. {{프로세스명}} 절차

### N.1 프로세스 흐름

```
단계1 → 단계2 → 단계3
   ↓
분기 조건
   ↓
단계4
```

### N.2 단계별 설명

| 단계 | 담당 | 작업 | 산출물 |
|------|------|------|--------|
| 1 | {{담당}} | {{작업}} | {{산출물}} |
```

**실제 예시** (change-control.md):
```markdown
## 3. CHG 프로세스

### 3.1 프로세스 흐름

```
변경 필요 발생
      ↓
CHG 문서 작성
      ↓
영향도 분석
      ↓
Owner 검토
      ↓
  ┌───┴───┐
 승인    반려
```
```

### 8단계: 예외 사항 정의

규칙의 예외를 명시합니다:

```markdown
## N. 예외 사항

### N.1 예외 조건

| 규칙 | 예외 조건 | 대체 규칙 |
|------|----------|----------|
| {{규칙}} | {{예외 조건}} | {{대체 규칙}} |

### N.2 예외 대상

- {{예외 대상 1}}
- {{예외 대상 2}}
```

**실제 예시** (document-schema.md):
```markdown
## 8. 예외 처리

### 8.1 템플릿 파일
- `.agent/templates/` 내 파일은 `TPL-` 접두사 사용
- docId 형식 미적용

### 8.2 메타 규칙 파일
- `.agent/rules/` 내 파일은 docId 없이 직접 명명
- 예: `document-schema.md`, `ownership.md`
```

### 9단계: 관련 문서 연결

상위/참조 문서를 연결합니다:

```markdown
## N. 관련 문서

### N.1 상위 문서

| 문서 | 관계 |
|------|------|
| MASTER.md | 상위 원칙 |

### N.2 관련 규칙

- `{{관련 규칙 1}}` - {{관계 설명}}
- `{{관련 규칙 2}}` - {{관계 설명}}
```

### 10단계: 검증 및 저장

**저장 위치**: `.agent/rules/{영문명}.md`

**검증 체크리스트**:
- [ ] 헤더 형식 올바름
- [ ] 상위 규칙 MASTER.md 참조
- [ ] 개요 섹션 존재
- [ ] 핵심 원칙 블록쿼트 사용
- [ ] 테이블 형식 일관성
- [ ] 예외 사항 섹션 존재

## 일반적인 패턴

### 분류 체계 규칙 (document-schema.md 스타일)

**목적**: 네이밍 규칙, 유형 정의, 형식 규칙

**구조**:
```markdown
# {filename}.md - {분류 체계명}

> **상위 규칙**: MASTER.md
> **버전**: 1.0
> **상태**: Draft

---

## 1. 개요
## 2. 네이밍 규칙 (형식 정의)
## 3. 유형 정의 (테이블)
## 4. 파일명 규칙
## 5. 도메인 규칙
## 6. 문서 간 관계
## 7. 일련번호 관리
## 8. 예외 처리
```

**핵심 요소**:
- 형식 정의 (`{TYPE}-{domain}-{seq}`)
- 유형별 테이블 (POL, PRC, RUL, CHG)
- 코드 블록으로 예시

### 거버넌스 규칙 (ownership.md 스타일)

**목적**: 핵심 원칙, 역할/책임, RACI 매트릭스

**구조**:
```markdown
# {filename}.md - {거버넌스 규칙명}

> **상위 규칙**: MASTER.md
> **버전**: 1.0
> **상태**: Draft

---

## 1. 개요
## 2. 핵심 원칙 (블록쿼트)
## 3. 역할 정의 (Owner, Deputy)
## 4. 역할별 책임
## 5. RACI 매트릭스
## 6. 인수인계 절차
## 7. 메타데이터 형식
## 8. 예외 사항
```

**핵심 요소**:
- 핵심 원칙 블록쿼트
- 역할 테이블
- RACI 매트릭스 (R/A/C/I)

### 프로세스 규칙 (change-control.md 스타일)

**목적**: 절차 정의, 단계별 설명, 승인 흐름

**구조**:
```markdown
# {filename}.md - {프로세스 규칙명}

> **상위 규칙**: MASTER.md
> **버전**: 1.0
> **상태**: Draft

---

## 1. 개요
## 2. 핵심 원칙
## 3. 프로세스 흐름 (다이어그램)
## 4. 단계별 설명
## 5. 분류 기준 (영향도 등)
## 6. 긴급 경로
## 7. 승인/반려
## 8. 이력 관리
## 9. 예외 사항
```

**핵심 요소**:
- 프로세스 흐름도 (ASCII)
- 단계별 테이블
- 분류 기준 테이블

## 모범 사례

1. **Adoption First**: 따르기 쉬운 규칙 작성
   - 핵심 원칙을 블록쿼트로 강조
   - 테이블로 구조화

2. **MASTER.md 참조**: 모든 메타 규칙은 MASTER.md를 상위 규칙으로
   - 핵심 3원칙 (Adoption First, Single Owner, Change Control) 준수

3. **일관된 구조**: 기존 메타 규칙과 동일한 패턴
   - 헤더 형식 통일
   - 섹션 번호 체계

4. **테이블 활용**: 규칙 정의, 역할, 분류 등
   - 일관된 테이블 형식
   - 필수/선택 구분

5. **블록쿼트로 원칙 강조**: 핵심 원칙은 `>` 사용
   - 한 문장으로 명확히
   - 볼드체 강조

6. **예외 명시**: 모든 규칙에 예외 섹션
   - 예외 조건 테이블
   - 대체 규칙 명시

7. **프로세스는 다이어그램**: 절차 규칙은 ASCII 흐름도
   - 분기 조건 명시
   - 단계별 테이블 보완

8. **버전 관리**: 헤더에 버전/상태 명시
   - 1.0부터 시작
   - Draft → Review → Approved

## 검증 체크리스트

메타 규칙 완성 전 확인:

### 헤더 검증
- [ ] 제목 형식: `# {filename}.md - {한글 제목}`
- [ ] 상위 규칙: `MASTER.md` 참조
- [ ] 버전 표기 (1.0 형식)
- [ ] 상태 표기 (Draft/Review/Approved)
- [ ] 수평선 (`---`) 구분

### 구조 검증
- [ ] 개요 섹션 존재 (규칙 목적)
- [ ] 핵심 원칙 섹션 (블록쿼트)
- [ ] 상세 규칙 섹션 (테이블)
- [ ] 예외 사항 섹션
- [ ] 관련 문서 섹션

### 내용 품질 검증
- [ ] 핵심 원칙이 블록쿼트로 강조됨
- [ ] 테이블 형식이 일관됨
- [ ] 예시가 구체적
- [ ] 프로세스는 흐름도 포함 (해당 시)

### 저장 위치
- [ ] `.agent/rules/{영문명}.md`
- [ ] 파일명이 영문 하이픈 구분

### 프로젝트 원칙 검증
- [ ] MASTER.md 핵심 원칙과 일관
- [ ] 기존 메타 규칙과 충돌 없음

## 문제 해결

**헤더 형식이 잘못됨**:
- 기존 메타 규칙 (document-schema.md) 참조
- YAML frontmatter 사용 금지
- 마크다운 헤더 + 블록쿼트 형식 사용

**기존 규칙과 충돌함**:
- MASTER.md 핵심 원칙 재확인
- 기존 메타 규칙 검토 (document-schema, ownership, change-control)
- 범위 조정 또는 통합 검토

**규칙이 너무 추상적임**:
- 테이블로 구체화
- 예시 추가
- 조건-규칙-예시 형식 적용

**프로세스가 불명확함**:
- ASCII 흐름도 추가
- 단계별 테이블 작성
- 분기 조건 명시

**예외가 너무 많음**:
- 규칙 범위 재검토 (너무 넓지 않은지)
- 핵심 원칙 재정의
- 예외를 별도 규칙으로 분리 검토

## 출력 형식

메타 규칙 생성 시, 다음을 수행합니다:

1. 메타 규칙 여부 확인 (시스템 규칙인지)
2. 파일명 제안 (`{영문명}.md`)
3. 헤더 작성 (YAML 없이 마크다운)
4. 개요/핵심 원칙 작성
5. 상세 규칙 섹션 작성 (테이블 활용)
6. 프로세스 흐름도 작성 (해당 시)
7. 예외 사항 정의
8. 검증 체크리스트 확인
9. `.agent/rules/` 저장 위치 안내

결과물은 기존 메타 규칙(document-schema, ownership, change-control)과 일관된 구조를 가진 시스템 규칙 문서입니다.

## 관련 스킬

- **skill-writer**: 스킬 작성 시 참조
- **sub-agent-writer**: 서브에이전트 작성 시 참조
- **governance-auditor**: 규칙 검증/감사 시 사용
- **process-documenter**: 프로세스 문서화 시 참조

## 참조 문서

- `.agent/rules/document-schema.md` - 분류 체계 규칙 (패턴 참조)
- `.agent/rules/ownership.md` - 거버넌스 규칙 (패턴 참조)
- `.agent/rules/change-control.md` - 프로세스 규칙 (패턴 참조)
- `.agent/MASTER.md` - 마스터 규칙 (상위 원칙)
