# lifecycle.md - 문서 생명주기 규칙

> **상위 규칙**: MASTER.md
> **버전**: 1.0
> **상태**: Draft

---

## 1. 개요

이 규칙은 문서의 **상태 정의**와 **상태 간 전환 규칙**을 정의합니다.

### 1.1 목적
- 문서 상태의 명확한 정의
- 상태 전환 조건 표준화
- 문서 안정성 보장

### 1.2 적용 범위
- 모든 문서 유형 (POL, PRC, RUL, CHG, IDEA, PROP, RPT)
- 모든 상태 전환

---

## 2. 상태 정의

### 2.1 상태 목록

| 상태 | 설명 | 수정 가능 | 공식 참조 |
|------|------|:--------:|:--------:|
| **Idea** | 아이디어 메모 | ✅ 자유롭게 | ❌ 비공식 |
| **Proposal** | 구조화된 제안 | ✅ Owner만 | ❌ 비공식 |
| **Draft** | 작성 중 | ✅ 자유롭게 | ❌ 비공식 |
| **Review** | 검토 중 | ⚠️ Owner만 | ❌ 비공식 |
| **Approved** | 승인됨 | ❌ CHG 필요 | ✅ 공식 |
| **Deprecated** | 폐기 예정 | ❌ 불가 | ⚠️ 주의 필요 |
| **Archive** | 보관 | ❌ 불가 | ⚠️ 이력용 |

### 2.2 상태별 상세

#### Idea (아이디어)
- **목적**: 자유로운 아이디어 수집
- **수정 권한**: 누구나 자유롭게
- **특징**: 형식 제약 없음, 파일명 자유
- **주의**: 공식 참조 불가, 언제든 수정/삭제 가능

#### Proposal (제안)
- **목적**: 아이디어를 통합/구조화한 제안
- **수정 권한**: Owner만
- **특징**: 구조화된 형식, 검증 대상
- **주의**: 표준문서 전환 전 검증(RPT) 필요

#### Draft (작성 중)
- **목적**: 문서 초안 작성
- **수정 권한**: Owner, 위임받은 자
- **특징**: 자유롭게 수정, 삭제 가능
- **주의**: 공식 참조 불가, 변경될 수 있음

#### Review (검토 중)
- **목적**: 승인 전 검토
- **수정 권한**: Owner만
- **특징**: 검토 의견 반영을 위한 수정만 허용
- **주의**: 공식 참조 불가

#### Approved (승인됨)
- **목적**: 공식 문서로 활용
- **수정 권한**: CHG 절차 통해서만
- **특징**: 안정적, 공식 참조 가능
- **주의**: 직접 수정 금지

#### Deprecated (폐기 예정)
- **목적**: 폐기 전 유예 기간
- **수정 권한**: 없음
- **특징**: 대체 문서로 전환 안내
- **주의**: 30일 유예 후 Archive 전환

#### Archive (보관)
- **목적**: 이력 보존
- **수정 권한**: 없음
- **특징**: 읽기 전용, 삭제 불가
- **주의**: 보존 정책에 따라 관리

---

## 3. 상태 전이 다이어그램

### 3.1 전체 파이프라인

```
┌──────┐    ┌──────────┐    ┌─────┐    ┌──────┐    ┌──────────┐    ┌───────────┐
│ Idea │ →  │ Proposal │ →  │ RPT │ →  │Draft │ →  │  Review  │ →  │ Approved  │
└──────┘    └──────────┘    └─────┘    └──────┘    └──────────┘    └───────────┘
   │             │           (검증)        │            │                │
   │             │                         │            │                ↓
   └─────────────┴─────────────────────────┴────────────┴──────→  ┌───────────┐
                        (폐기)                                     │ Archive   │
                                                                   └───────────┘
```

### 3.2 표준 문서 상태 전이 (기존)

```
              ┌─────────────────────────────────┐
              │          (반려)                 │
              ↓                                 │
┌──────┐    ┌──────┐    ┌──────────┐    ┌─────┴─────┐
│Draft │ →  │Review│ →  │ Approved │ →  │Deprecated │
└──────┘    └──────┘    └──────────┘    └───────────┘
   │            │                              │
   │            │                              ↓
   │            ↓                        ┌─────────┐
   └────────────┴─────────────────────→  │ Archive │
        (작성 중단)                       └─────────┘
```

---

## 4. 허용되는 전환

### 4.1 전환 규칙 표

| 현재 상태 | → 대상 상태 | 조건 | 책임자 |
|----------|------------|------|--------|
| Idea | Proposal | 아이디어 통합/구조화 | 작성자 |
| Idea | Archive | 폐기 결정 | 작성자 |
| Proposal | Draft | RPT 검증 통과 | Owner |
| Proposal | Archive | 폐기 결정 | Owner |
| Draft | Review | Review Gate 통과 | Owner |
| Draft | Archive | 작성 중단 결정 | Owner |
| Review | Draft | 반려 사유 기재 | Owner |
| Review | Approved | Approval Gate 통과 | Owner |
| Approved | Deprecated | 폐기 결정, 대체 문서 | Owner |
| Deprecated | Archive | 유예 기간 종료 | Owner |

### 4.2 전환 조건 상세

#### Idea → Proposal
- 아이디어 내용 정리/통합
- Owner 지정
- 목표 문서 유형 결정 (POL/PRC/RUL)

#### Proposal → Draft
- RPT(검증 리포트) 작성 완료
- 전환 판정: "표준 문서 전환 가능"
- 목표 문서 유형에 맞는 템플릿 적용

#### Draft → Review
- Review Gate 조건 충족 (quality-gate.md 참조)
- 필수 섹션 존재
- Owner 지정 완료
- 자가 점검 완료

#### Review → Approved
- Approval Gate 조건 충족
- 품질 점수 7점 이상
- Owner 검토 완료
- 수정 사항 모두 반영

#### Review → Draft (반려)
- 반려 사유 명시
- 수정 필요 항목 나열
- 수정 후 재제출 안내

#### Approved → Deprecated
- 폐기 사유 명시
- 대체 문서 지정 (해당 시)
- 이해관계자 통보
- 유예 기간 설정 (기본 30일)

#### Deprecated → Archive
- 유예 기간 종료
- 참조 전환 완료 확인
- 최종 통보

---

## 5. 금지되는 전환

### 5.1 금지 목록

| 전환 | 이유 |
|------|------|
| Approved → Draft | 변경 통제 우회 |
| Approved → Review | 변경 통제 우회 |
| Deprecated → Approved | 폐기 결정 번복 |
| Deprecated → Draft | 폐기 문서 재작성 불가 |
| Deprecated → Review | 폐기 문서 재검토 불가 |
| Archive → Draft | 보관 문서 재활성화 금지 |
| Archive → Review | 보관 문서 재활성화 금지 |
| Archive → Approved | 보관 문서 재활성화 금지 |
| Archive → Deprecated | 보관 문서 재활성화 금지 |

### 5.2 금지 전환 대안

| 시도 | 대안 |
|------|------|
| Approved → Draft | CHG 문서 생성 → 수정 → 새 버전 |
| Deprecated → Approved | 새 문서 작성 (신규 docId) |
| Archive → * | 새 문서 작성 (기존 내용 참조) |

---

## 6. 상태별 허용 작업

### 6.1 작업 권한 표

| 상태 | 내용 수정 | 메타 수정 | 상태 변경 | 삭제 |
|------|:--------:|:--------:|:--------:|:----:|
| Draft | ✅ | ✅ | ✅ | ✅ |
| Review | ⚠️ Owner | ⚠️ Owner | ✅ Owner | ❌ |
| Approved | ❌ (CHG) | ❌ (CHG) | ✅ Owner | ❌ |
| Deprecated | ❌ | ❌ | ✅ Owner | ❌ |
| Archive | ❌ | ❌ | ❌ | ⚠️ 정책 |

### 6.2 작업 상세

#### 내용 수정
- Draft: 자유롭게 수정
- Review: Owner만, 검토 반영 목적
- Approved: CHG 절차 통해서만
- Deprecated/Archive: 수정 불가

#### 메타데이터 수정
- Draft: 자유롭게 수정
- Review: Owner만
- Approved: CHG 절차 통해서만
- Deprecated/Archive: 수정 불가

#### 삭제
- Draft: 삭제 가능 (Owner)
- Review 이상: 삭제 불가
- Archive: 보존 정책에 따름

---

## 7. 상태 전환 책임

### 7.1 책임자 정의

| 전환 | 책임자 | 필요 조건 |
|------|--------|----------|
| Draft → Review | Owner | 자가 점검 완료 |
| Review → Approved | Owner | 검토 완료 |
| Review → Draft | Owner | 반려 사유 기재 |
| Approved → Deprecated | Owner | 폐기 사유, 통보 |
| Deprecated → Archive | Owner | 유예 기간 종료 |

### 7.2 대리 수행

- Owner 부재 시 Deputy가 수행 가능
- Deputy 부재 시 상위 관리자 승인 필요
- 대리 수행 시 기록 필수

---

## 8. 유예 기간

### 8.1 유예 기간 정의

| 전환 | 유예 기간 | 목적 |
|------|:--------:|------|
| Approved → Deprecated | 30일 | 이해관계자 통보, 전환 준비 |
| Deprecated → Archive | 90일 | 참조 전환, 최종 확인 |

### 8.2 유예 기간 관리

1. **통보**: 유예 시작 시 이해관계자 통보
2. **리마인더**: 종료 7일 전 재통보
3. **종료**: 유예 종료 시 자동 전환
4. **연장**: 특별 사유 시 Owner 승인 하에 연장 (최대 1회)

### 8.3 유예 기간 중 작업

| 상태 | 허용 작업 |
|------|----------|
| Deprecated | 읽기, 대체 문서 참조 안내 |
| (유예 중) | 수정/삭제 불가 |

---

## 9. 예외 처리

### 9.1 긴급 폐기

- 보안/컴플라이언스 이슈 발생 시
- 유예 기간 단축 가능 (최소 7일)
- 상위 승인권자 승인 필수
- 즉시 통보 필수

### 9.2 폐기 철회

- Deprecated 상태에서만 가능
- Owner + 상위 승인권자 승인
- 철회 사유 문서화
- Approved 상태로 복원

---

## 10. 관련 규칙

| 규칙 | 연관성 |
|------|--------|
| `quality-gate.md` | 상태 전환 게이트 조건 |
| `change-control.md` | Approved 문서 수정 절차 |
| `ownership.md` | Owner/Deputy 정의 |

---

## 11. 부록: 상태 전환 빠른 참조

### 11.1 허용 전환 요약

```
Idea ──→ Proposal ──→ [RPT 검증] ──→ Draft ──→ Review ──→ Approved ──→ Deprecated ──→ Archive
  │          │                          │          │
  │          │                          │          └──→ Draft (반려)
  │          │                          │
  └──────────┴──────────────────────────┴──→ Archive (폐기)
```

### 11.2 전환 체크리스트

#### Idea → Proposal
- [ ] 아이디어 내용 정리 완료
- [ ] Owner 지정
- [ ] 목표 문서 유형 결정

#### Proposal → Draft
- [ ] RPT 검증 리포트 작성
- [ ] 전환 판정 "표준 문서 전환 가능"
- [ ] 목표 문서 템플릿 적용

#### Draft → Review
- [ ] 필수 섹션 존재
- [ ] Owner 지정
- [ ] docId 형식 준수
- [ ] 자가 점검 완료

#### Review → Approved
- [ ] 품질 점수 7점 이상
- [ ] Owner 검토 완료
- [ ] 수정 사항 반영

#### Approved → Deprecated
- [ ] 폐기 사유 명시
- [ ] 대체 문서 지정
- [ ] 이해관계자 통보
- [ ] 유예 기간 설정

#### Deprecated → Archive
- [ ] 유예 기간 종료
- [ ] 참조 전환 완료
- [ ] 최종 통보
